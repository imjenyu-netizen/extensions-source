// 1. 强行引入核心插件
apply plugin: 'com.android.application'
apply plugin: 'kotlin-android' 

ext {
    extName = 'Gomuraw'
    extClass = '.Gomuraw'
    extVersionCode = 20
}

// 2. 引入官方脚本（虽然它可能报错，但我们需要它的依赖库）
apply from: "$rootDir/common.gradle"

// 3. [暴力破解] 强行覆盖所有路径配置
android {
    compileSdk 34
    namespace "eu.kanade.tachiyomi.extension.ja.gomuraw"

    sourceSets {
        main {
            // 放弃相对路径，直接强行指向当前目录下的 src
            java.srcDirs = [file("src")]
            kotlin.srcDirs = [file("src")]
            manifest.srcFile file("AndroidManifest.xml")
        }
    }

    // 强制开启 Kotlin 编译支持
    kotlinOptions {
        jvmTarget = "17"
    }
}

// 4. 强行注入核心依赖，确保编译器有活干
dependencies {
    implementation(project(":core"))
    implementation("org.jetbrains.kotlin:kotlin-stdlib:1.9.22")
}
